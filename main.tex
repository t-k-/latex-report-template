%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Simple Sectioned Essay Template
% LaTeX Template
%
% This template has been downloaded from:
% http://www.latextemplates.com
%
% Note:
% The \lipsum[#] commands throughout this template generate dummy text
% to fill the template out. These commands should all be removed when 
% writing essay content.
%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

%----------------------------------------------------------------------------------------
%	PACKAGES AND OTHER DOCUMENT CONFIGURATIONS
%----------------------------------------------------------------------------------------

\documentclass[12pt]{article} % Default font size is 12pt, it can be changed here

\usepackage{listings}
\lstset{
    basicstyle=\ttfamily,
    mathescape
}

\usepackage{hyperref}

% \usepackage{geometry} % Required to change the page size to A4
% \geometry{a4paper} % Set the page size to be A4 as opposed to the default US Letter

\usepackage{graphicx} % Required for including pictures
\usepackage{amsfonts}
\usepackage{amsmath}

\usepackage{float} % Allows putting an [H] in \begin{figure} to specify the exact location of the figure
\usepackage{wrapfig} % Allows in-line images such as the example fish picture

\usepackage{lipsum} % Used for inserting dummy 'Lorem ipsum' text into the template

\linespread{1.2} % Line spacing

%\setlength\parindent{0pt} % Uncomment to remove all indentation from paragraphs

%\graphicspath{{Pictures/}} % Specifies the directory where pictures are stored

\begin{document}

\title{Autocompletion on Wikipedia corpus (with Symbol Sequence)}
\author{Wei Zhong}
\maketitle

Symbol sequency similarity is added in this version.
For example, $tan$ is more similar than $atn$.

Also, this time the index is rebuilt without applying any unification (on around 250,000 Wikipedia formulas), that is, each expression is treated as unique expression and they all have uniform frequency of one.
Otherwise previous unification will unifiy many expressions of different symbol sequence so that we cannot see the difference between $tan$ and $atn$.

Without considering frequency, I have evaluated previous example queries using the following two new similarity scores:
$$
\text{score}_1 = \frac{w_1 s_1}{\log \delta_{\text{leaves}}}
$$
$$
\text{score}_2 = \frac{w_1 s_1 + w_2 s_2}{\log \delta_{\text{leaves}}}
$$
where $w_1 = 10,000$ and $w_2 = 1$, $s_1$ is the symbol set similarity, $s_2$ is the longest common substring between two symbol set string, and $\delta_{\text{leaves}}$ is the difference between number of leaves from query and candidate OPT.

\pagebreak
\section*{Generated example}

\subsection{Query $x^2+y$}
\begin{center}
\begin{tabular}{lcccc}
Query  & \multicolumn{2}{c}{ $x^2$ } \\ & metric1 & metric2 \\
\hline
 &  $    y=x^{2}\,                    $ & $      1-x^{2}\,                     $ \\
 &  $   y=x^{2}                       $ & $     x^{2}=1                            $ \\
 &  $   z=x^{2}.\,                    $ & $      y=x^{2}                          $ \\
 &  $   1-x^{2}\,                     $ & $     wx^{2}                               $ \\
\end{tabular}
\end{center}

\begin{center}
\begin{tabular}{lcccc}
Query  & \multicolumn{2}{c}{ $x^2 + $ } \\ & metric1 & metric2 \\
\hline
 &  $  \underset{x\in(-\infty,-1]}{\operatorname{arg\,min}}\;x^{2}+1,  $ & $
\sqrt{x^{2}+b} $ \\
 &  $  x^{2}+2                  $ & $      \sqrt{1+x^{2}}                          $ \\
 &  $ x^{2}+1                   $ & $   \underset{x\in(-\infty,-1]}{\operatorname{arg\,min}}\;x^{2}+1,   $ \\
 &  $ x^{2}-2                   $ & $   x^{2}-2           $ \\
\end{tabular}
\end{center}


\begin{center}
\begin{tabular}{lcccc}
Query  & \multicolumn{2}{c}{ $x^2 + y$ } \\ & metric1 & metric2 \\
\hline
 &  $  x^{2}+x+1   $ & $    x^{2}+x+1                            $ \\
 &  $  x^{2}+x+1   $ & $    x^{2}+x+1                                $ \\
 &  $  x^{2}+x+1   $ & $    x^{2}+x+1                               $ \\
 &  $  x^{4}+x+1   $ & $    q^{2}+q+1                               $ \\
\end{tabular}
\end{center}

\pagebreak
%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%

\subsection{Query $ax^2+b$}

\begin{center}
\begin{tabular}{lcccc}
Query  & \multicolumn{2}{c}{ $ax$ } \\ & metric1 & metric2 \\
\hline
 &  $  M_{ax}   $ & $    \displaystyle\sin(ax)                        $ \\
 &  $  \displaystyle f(ax)\   $ & $    \displaystyle f(ax)\,           $ \\
 &  $  ax=0   $ & $    ax+b                     $ \\
 &  $  ax=0   $ & $    x\mapsto ax                     $ \\
\end{tabular}
\end{center}

\begin{center}
\begin{tabular}{lcccc}
Query  & \multicolumn{2}{c}{ $ax^2$ } \\ & metric1 & metric2 \\
\hline
 &  $  \displaystyle\sin(ax^{2})   $ & $  \textstyle x\mapsto ax^{2}            $ \\
 &  $  \displaystyle\cos(ax^{2})   $ & $ \displaystyle\cos(ax^{2})      $ \\
 &  $  \textstyle x\mapsto ax^{2}   $ & $  \displaystyle\sin(ax^{2})\,        $ \\
 &  $  (q,aq^{2})   $ & $    (q,aq^{2}).      $ \\
\end{tabular}
\end{center}

\begin{center}
\begin{tabular}{lcccc}
Query  & \multicolumn{2}{c}{ $ax^2 + $ } \\ & metric1 & metric2 \\
\hline
 &  $  y=\alpha+\beta x^{2},\,   $ & $    y=\alpha+\beta x^{2},\,   $ \\
 &  $  \lambda x.x^{2}+2   $ & $  xy+yx^{2}                    $ \\
 &  $  an^{2}+bn   $ & $   2x^{2}+3x               $ \\
 &  $  an^{2}+bn   $ & $   an^{2}+bn $ \\
\end{tabular}
\end{center}

\begin{center}
\begin{tabular}{lcccc}
Query  & \multicolumn{2}{c}{ $ax^2 + b$ } \\ & metric1 & metric2 \\
\hline
 &  $  y=\alpha+\beta x^{2},\,  $ & $  y=\alpha+\beta x^{2},\,            $ \\
 &  $  y=\alpha+\beta^{2}x  $ & $   A=(X+t^{2}P)                           $ \\
 &  $  A=(X+t^{2}P)   $ & $   y=\alpha+\beta^{2}x $ \\
 &  $  x^{5}+ax^{2}+b  $ & $  \sqrt{ax^{2}+b}\ (a\neq 1)        $ \\
\end{tabular}
\end{center}

\pagebreak
%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%

\subsection{Query $(1+ \frac 1 n)^n$}

\begin{center}
\begin{tabular}{lcccc}
Query  & \multicolumn{2}{c}{ $1+$ } \\ & metric1 & metric2 \\
\hline
 &  $  x+1  $ & $    x+1               $ \\
 &  $  1+i   $ & $    1+i                               $ \\
 &  $  x+1   $ & $  x+1                             $ \\
 &  $  n+1  $ & $    n+1                             $ \\
\end{tabular}
\end{center}

\begin{center}
\begin{tabular}{lcccc}
Query  & \multicolumn{2}{c}{ $1+ \frac 1 n$ } \\ & metric1 & metric2 \\
\hline
 &  $ (1+1/n)^{n}   $ & $   (1+1/n)^{n}                          $ \\
 &  $  1+\frac{1}{\varphi}=\varphi.   $ & $ p:=1+\frac{1}{\alpha} $ \\
 &  $  p:=1+\frac{1}{\alpha}    $ & $  1+\frac{1}{\varphi}=\varphi.   $ \\
 &  $  \phi=1/\phi+1   $ & $ \phi=1/\phi+1                  $ \\
\end{tabular}
\end{center}

\begin{center}
\begin{tabular}{lcccc}
Query  & \multicolumn{2}{c}{ $(1+ \frac 1 n)$ } \\ & metric1 & metric2 \\
\hline
 &  $ (1+1/n)^{n}   $ & $  (1+1/n)^{n}                        $ \\
 &  $  \lambda\,\Gamma(1+1/k)\,  $ & $   \lambda\,\Gamma(1+1/k)\,                        $ \\
 &  $  H=x\text{m}\left(1+\frac{1}{\alpha}\right)    $ & $   H=x\text{m}\left(1+\frac{1}{\alpha}\right)        $ \\
 &  $  \beta^{\prime}=(1+1/\beta)^{-1}   $ & $  \beta^{\prime}=(1+1/\beta)^{-1}       $ \\
\end{tabular}
\end{center}

\begin{center}
\begin{tabular}{lcccc}
Query  & \multicolumn{2}{c}{ $(1+ \frac 1 n)^n$ } \\ & metric1 & metric2 \\
\hline
 &  $ \lim_{n\to\infty}\left(1+\frac{1}{n}\right)^{n},   $ & $    \lim_{n\to\infty}\left(1+\frac{1}{n}\right)^{n},         $ \\
 &  $ \lim_{n\to\infty}\left(1+\frac{1}{n}\right)^{n}.  $ & $   \lim_{n\to\infty}\left(1+\frac{1}{n}\right)^{n}.$ \\
 &  $ \lim_{n\to\infty}\left(1+\frac{1}{n}\right)^{n} $ & $  \lim_{n\to\infty}\left(1+\frac{1}{n}\right)^{n} $ \\
 &  $  \lim_{n\to\infty}\left(1+\frac{1}{n}\right)^{n}   $ & $  \lim_{n\to\infty}\left(1+\frac{1}{n}\right)^{n} $ \\
\end{tabular}
\end{center}

\pagebreak
%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%

\subsection{Query $ta$}

\begin{center}
\begin{tabular}{lcccc}
Query  & \multicolumn{2}{c}{ $ta$ } \\ & metric1 & metric2 \\
\hline
 &  $  \mathrm{nat}   $ & $   \,e^{ta} $ \\
 &  $  \,e^{ta}  $ & $   tanθ                    $ \\
 &  $ \rm atm\,    $ & $ tan                      $ \\
 &  $ tanθ  $ & $ \rm atm\, $ \\
\end{tabular}
\end{center}

\section*{Problem}
1. Query processing time doubled, the longest-common-substring is of $O(mn)$ complexity. 
2. Frequency is too important to be ignored.
3. Few cases that I can come up with an example where longest-common-sequence would help relevance.
3. How do we define uniqueness when measured by symbol sequence similarity?

\end{document}
